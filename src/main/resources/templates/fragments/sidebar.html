<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <aside th:fragment="sidebar" class="fixed left-0 top-0 z-40 h-screen w-64 bg-[#0f172a] border-r border-gray-800 transition-all duration-300">
        <div class="flex h-full flex-col">
            <div class="flex items-center gap-3 h-16 px-6 border-b border-gray-800">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg bg-teal-500">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg>
                </div>
                <span class="text-lg font-bold text-white">Aletheia</span>
            </div>

            <nav class="flex-1 overflow-y-auto p-3 space-y-1">
                <a th:href="@{/dashboard}" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white transition-colors"
                   th:classappend="${currentPath == '/dashboard'} ? 'bg-teal-500/10 text-teal-500'">
                    <span>Dashboard</span>
                </a>

                <th:block th:if="${isResearcher}">
                    <a th:href="@{/papers/my-papers}" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white"
                       th:classappend="${currentPath == '/papers/my-papers'} ? 'bg-teal-500/10 text-teal-500'">
                        <span>My Papers</span>
                    </a>
                    <a th:href="@{/papers/submit}" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white"
                       th:classappend="${currentPath == '/papers/submit'} ? 'bg-teal-500/10 text-teal-500'">
                        <span>Submit Paper</span>
                    </a>
                </th:block>

                <th:block th:if="${isReviewer}">
                    <a th:href="@{/reviews/my-reviews}" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white"
                       th:classappend="${currentPath == '/reviews/my-reviews'} ? 'bg-teal-500/10 text-teal-500'">
                        <span>Assigned Reviews</span>
                    </a>
                </th:block>

                <th:block th:if="${isAdmin}">
                    <a th:href="@{/admin/users}" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white"
                        th:classappend="${currentPath == '/admin/users'} ? 'bg-teal-500/10 text-teal-500'">
                        <span>Manage Users</span>
                    </a>
                    <a th:href="@{/admin/papers}" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white"
                       th:classappend="${currentPath == '/admin/papers'} ? 'bg-teal-500/10 text-teal-500'">
                        <span>Manage Papers</span>
                    </a>
                </th:block>
            </nav>

            <div class="border-t border-gray-800 p-4">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-teal-500 flex items-center justify-center text-white font-medium" 
                         th:text="${#strings.substring(user.firstName, 0, 1)}">U</div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-white truncate" th:text="|${user.firstName} ${user.lastName}|">User Name</p>
                        <p class="text-xs text-gray-500 truncate" th:text="${user.email}">user@email.com</p>
                    </div>
                </div>
                <form th:action="@{/logout}" method="post" class="mt-2">
                    <button type="submit" class="w-full text-left text-xs text-gray-400 hover:text-white">Logout</button>
                </form>
            </div>
        </div>
    </aside>
</body>
</html>