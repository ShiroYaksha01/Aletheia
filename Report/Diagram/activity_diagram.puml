@startuml aletheia_activity_diagram
title Aletheia Paper Review System - Activity Diagram

|User|
start
:Access system;

|System|
:Display login page;

|User|
repeat
  :Enter credentials;
  :Click Login;
  |System|
backward: Display error message if invalid;
repeat while (Credentials valid?) is (no)
    ->yes;
    :Validate credentials;
    :Authenticate user;
    :Load user role;


if (Role?) then (Researcher)
|Researcher|
  :View dashboard;
  :Submit paper;
  note right
    CRUD validation:
    - Title required
    - Abstract required
    - PDF format only
    - File size limit
  end note
  
  |System|
  :Validate paper format;
  if (Paper valid?) then (yes)
    :Store paper in database;
    :Set status "Pending Review";
  else (no)
    :Display validation errors;
  endif
  
  |Researcher|
  :Go to dashboard;
  stop

else if (Role?) then (Reviewer)
  |Reviewer|
  :View assigned papers;
  :Read paper details;
  :Submit review form;
  note right
    CRUD validation:
    - Rating (1-10)
    - Comments required
    - Recommendation
  end note
  
  |System|
  :Validate review data;
  if (Review valid?) then (yes)
    :Store review;
    :Update paper status;
  else (no)
    :Display validation errors;
  endif
  
  |Reviewer|
  :Go to dashboard;
  stop

else if (Role?) then (Admin)
  |Admin|
  :View dashboard;
  :Manage users (CRUD);
  :View all papers;
  :Assign reviewers;
  note right
    Authorization check:
    Only Admin role
  end note
  
  |System|
  :Create review assignment;
  
  |Admin|
  :View review status;
  stop
else
    |System|
    stop
endif

@enduml
